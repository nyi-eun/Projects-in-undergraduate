<h2 align='center'> 행복결정요인 분석 - 수면과 월평균 가구총소득 중심으로 </h2>
<h3 align='center'> [전공] 회귀분석 Project </h3>
<h4 align='center'> (2022.05. ~ 2022.06.)

![Aqua Lines](https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/aqua.png)

&nbsp;

## 1. 배경 및 목적

- 2019 국민건강영양조사 데이터를 활용한 행복결정요인 분석
- 수면과 월평균 가구총소득에 따른 상관관계 도출
- 최적의 모형을 통해 우리나라 사람들의 행복결정요인에 대한 분석 및 행복향상방안 도출
- 종속변수: 행복 대체 변수 (수면, 가구총소득)
- 독립변수:  
    - 최근 1년 동안 1주 동안 아침식사 빈도(L_BR_FQ)
    - 한 번에 마시는 음주량_잔(BD2_14)
    - 하루 60분 이상 신체활동 실천 일수(BE9)
    - 평소 하루 앉아서 보내는 시간(시간) (BE8_1)
    - 하루평균 흡연량(BS3_2)
    - 당(N_SUGAR)
    - 탄수화물(N_CHO)
<br/>

## 2. 주최 기관

- 주최: AI빅데이터융합경영학과 전공 수업 ‘회귀분석’

<br/>

## 3. 프로젝트 기간 
- 2022.05 ~ 2022.06 (1개월)


<br/>

## 4. 프로젝트 설명   
본 프로젝트는 2019 국민건강영양조사 데이터를 활용해 종속변수 및 독립변수를 설정하여 최적의 회귀 모형을 세워 결과를 도출 및 인사이트 도출을 목적으로 한다. 순서는 **전처리, 변수 설명, 변수선택, 단계별 회귀, 변수변환 및 final model 선정** 순으로 진행했다.   
국민 건강영양조사의 파일을 확인한 결과, **범주형 데이터** 인 ‘**행복’을 종속변수로** 넣어본 결과, 분석이 **잘되지 않는다**는 문제가 발생해 행복을 대체할만한 변수들을 고민하던 중, 논문을 통해 **행복에 비례하는 변수들을 대체하여 종속 변수**를 세우게 되었다. 따라서 종속변수는 크게 **두 가지** **심리적 안정(수면), 경제적 안정(월평균 가구총소득)** 으로 설정하여 회귀분석을 진행했다.      
전처리의 경우, 모름과 비해당의 데이터는 삭제하였고 수면의 경우, 주말과 평일로 나뉘어져 있어 합쳐주었다. 또한 범주형 데이터의 경우, 파악하기 쉽게 점수를 부여하는 형식으로 값을 변환해주었다. 변수 설정의 경우, **독립변수는 총 7개로** **식사, 건강, 음주, 흡연**의 카테고리로 나누어 하나를 제외한 나머지 변수는 수치형 변수를 활용하였다.   

모델 변환 전에 Full model을 통해 유의성 여부에 대해서 파악하고자 하였다. 종속변수가 수면인 경우, 1일 당 섭취량, 1일 탄수화물 섭취량, 걷기 지속 시간이 유의하지 않은 것으로 파악되었고, 종속변수가 월평균 가구총소득인 경우, 두개를 제외한 나머지 변수는 유의하지 않은 것으로 파악했다. 또한 다중공선성을 파악한 결과, 두 개의 모델 다 큰 값이 특출나게 보이지는 않아 따로 처리를 진행하진 않았다.
    
<img width="497" alt="s" src="https://github.com/Ji-eun-Kim/Big-Data-Processing-n-Visualization/assets/124686375/ece8a0a9-b5a0-4d2a-b006-62319b68648b">|<img width="496" alt="5" src="https://github.com/Ji-eun-Kim/Big-Data-Processing-n-Visualization/assets/124686375/a31d55c4-97d2-4921-b5ac-e5a5c4661fef">
---|---|

최적 모형을 찾기 위해 변수 선택을 진행했다. 변수 선택 방법은 총 **2가지(adj-R2, Mallow-cp)를** 활용했다. 종속변수가 **수면**인 경우, 가장 높게 나온 값인 **0.3312인 36번째 모델**을 선정하였다. null-model과 adj-R2로 얻은 모델과의 비교를 한 결과, 아주 유의한 것으로 나타났음을 알 수 있었다. 두 번째로, 종속변수가 **월평균 가구 총소득**인 경우, 가장 높게 나온 값인 **0.017로, 22번째의 모델로** 선정하였다. 마찬가지로 Null-model과 비교 결과, 유의하다는 결과를 얻을 수 있었다.  
   **Mallow-cp** 변수 선택도 진행해본 결과, 첫 번째 모델에서는 **p-value값이 0.764로 유의 수준을 벗어나** **adj-R2 모델**로 선정하였다. 두 번째 모델에서는 X5가 유의 수준을 벗어나 **adj-R2**로 선정한 모델을 선택하였습니다. 추가로 **R-squared** 값을 비교했을 때, adj-R2 모델이 더 높게 나왔음을 알 수 있었다.   
   **단계별 회귀**를 실시하여 adj-R2에서 선택된 변수들 중, 더 유의미한 설명변수가 있는지 확인하기 위해 단계별회귀를 실시했다. 실시한 결과, 두 가지의 모델이 다 유의미한 것으로 판명되어, 추가적인 변수 선택을 더 이상 진행하지 않았다.

<img width="477" alt="회귀분석4" src="https://github.com/Ji-eun-Kim/Big-Data-Processing-n-Visualization/assets/124686375/c8e5949d-9d12-47b4-b073-a68614901697"> | <img width="478" alt="회귀분석6" src="https://github.com/Ji-eun-Kim/Big-Data-Processing-n-Visualization/assets/124686375/a7080836-3f12-4bc6-9c3c-f73b2c9b73c0">
---|---|

 변수 변환을 하기 위해 **Boxcox** 변환도 진행하였다. 종속변수가 수면인 경우, Y를 변환하지 않은 모델을 사용하는 것이 가장 유의한 모델이라는 결과를 얻었고, **R-squared** 값 또한 비교해본 결과 변환하지 않은 Y의 **R-squared 값이 0.331**로 기존 회귀 모델을 유지하기로 하였다. 추가적으로 **다중공선성과 BIC 분석**도 해본 결과, 별다른 특징이 없어 최종 모델로 선택하였다.     
 
 종속변수가 월평균 가구총소득인 경우, **Boxcox 변환**을 진행한 결과, **lambda가 0.5**에 근접하였다. 이를 통해 **sqrt 변환**이 가장 fitting이 잘 될 것이라 예상되었으나, **3가지 변수 변환 과정**을 다 진행하였다. **Q-Q plot**을 확인한 결과, sqrt 변수 변환을 했을 때, 정규성을 아주 잘 따르는 것을 확인할 수 있다. 따라서 종속변수가 월평균 가구총소득인 경우, **sqrt 변환**을 한 그래프를 축소 모델로 선정하였다. 마찬가지로 **다중공선성 및 BIC의 분석** 결과, 별다른 특징이 없어 최종 모델로 선택하였다.   
   최종 모형으로 선정하기 위해 마지막 단계로 **SSE 와 PRESS의 비교**, **R2와 R2predic** 값을 구해 예측의 정확도가 높은가에 대한 여부를 확인한 결과, 별 차이가 없어 두 모델 모두 adj-R2에서 선택된 모델을 최종 모델로 선정해주었다. 종속변수가 **수면**인 경우, **최종 변수는 총 6가지**이고, 종속변수가 **월평균 가구총소득**인 경우, 최종 변수는 **4가지인 회귀 모형**으로 결정하였다.

결론적으로, 행복대체변수인 수면과 월평균 가구총소득을 행복으로 가정했을 때, **하루 평균 흡연량이 적고, 1일 당 섭취량이 많을수록 행복도가 증가**한다는 결론을 얻을 수 있었다.  흡연을 과다하게 많이 하는 사람들에게는 흡연량을 줄이는 방안을 권고하였고, 어느 정도의 당 섭취량은 있어야 인간의 행복에 영향을 미친다는 인사이트를 도출하며 프로젝트를 마무리하였다. 




## 5. 팀원 및 담당 역할  

**<팀원>**

- 개인 프로젝트

**<담당 역할>**

- 데이터 전처리
- 가설 설정 후, 기각 여부 확인
- 회귀 모델 생성 및 인사이트 도출

<br/>

## 6. 발표 자료 및 데이터

- 발표 자료  
https://drive.google.com/file/d/1V8_wF55W4nAaWJsTTHvBuGc5wr7EZbB9/view
